<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Consulta tus Puntos | HappyCorner</title>

<link rel="icon" type="image/png" href="/happyfavicon.png">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

<style>
/* --- Copi√© tus estilos exactos --- */
* { margin:0; padding:0; box-sizing:border-box; font-family:'Poppins',sans-serif; color:#222; }
body { background:#f0f2f5; }
header { background: linear-gradient(to right,#ff69b4,#ffa500,#f0e68c); padding:1rem; display:flex; justify-content:space-between; align-items:center; min-height:80px; box-shadow:0 2px 10px rgba(0,0,0,0.1); }
header img { height:65px; max-width:80%; object-fit:contain; }
.menu-btn { font-size:2rem; background:none; border:none; cursor:pointer; color:#222; display:block; }
nav { position:absolute; top:100%; left:0; width:100%; background-color:rgba(255,255,255,0.95); display:none; flex-direction:column; align-items:center; padding:1rem 0; box-shadow:0 4px 8px rgba(0,0,0,0.15); }
nav.open { display:flex; }
nav a { color:#333; text-decoration:none; padding:0.8rem 1.5rem; font-weight:500; }
nav a:hover { color:#ff69b4; transform:scale(1.05); }
.cart-icon { display:none; }
main { display:flex; flex-direction:column; align-items:center; gap:2rem; padding:1.5rem 1rem; max-width:1200px; margin:0 auto; }
.page-title { text-align:center; font-size:2.5rem; font-weight:700; margin:1rem 0 2rem; color:#ff69b4; position:relative; padding-bottom:15px; }
.page-title::after { content:''; position:absolute; left:50%; bottom:0; transform:translateX(-50%); width:80px; height:5px; background-color:#ffa500; border-radius:3px; }
.puntos-container { width:100%; max-width:500px; background:white; border-radius:12px; box-shadow:0 5px 15px rgba(0,0,0,0.08); padding:2rem; text-align:center; }
.puntos-container h2 { font-size:1.6rem; font-weight:600; color:#333; margin-bottom:1.5rem; border-bottom:2px solid #f0e68c; padding-bottom:0.8rem; }
.consulta-form input { width:100%; padding:12px 10px; margin-bottom:15px; border:2px solid #ddd; border-radius:8px; font-size:16px; }
.consulta-form input:focus { outline:none; border-color:#ff69b4; }
.consulta-form button { width:100%; padding:12px; background:linear-gradient(to right,#ff69b4,#ffa500,#f0e68c); color:white; border:none; border-radius:8px; font-size:18px; font-weight:600; cursor:pointer; }
.consulta-form button:hover { background:linear-gradient(to right,#e6569f,#e09500,#d3d97f); }
#resultados-container { margin-top:25px; text-align:left; }
.info-card { background-color:#f9f9f9; border-radius:10px; padding:20px; border:1px solid #eee; }
.info-card h3 { color:#ff6347; margin-top:0; border-bottom:2px solid #ff6347; padding-bottom:5px; }
.info-card p { margin:5px 0; }
.error { color:#d9534f; font-weight:600; text-align:center; }
.loader { border:4px solid #f3f3f3; border-radius:50%; border-top:4px solid #ff69b4; width:30px; height:30px; animation:spin 2s linear infinite; margin:0 auto 15px; }
@keyframes spin { 0% { transform:rotate(0deg); } 100% { transform:rotate(360deg); } }
footer { background:#222; color:#eee; padding:2rem 1rem; text-align:center; margin-top:3rem; box-shadow:0 -2px 10px rgba(0,0,0,0.1); }
.footer-content { max-width:900px; margin:0 auto; }
.social-icons a { color:white; font-size:1.5rem; margin:0 10px; }
.social-icons a:hover { color:#ff69b4; }
.footer-links { margin-top:1.5rem; display:flex; flex-wrap:wrap; justify-content:center; gap:15px; }
.footer-links a { color:#eee; text-decoration:none; font-size:0.95rem; }
.footer-links a:hover { color:#ff69b4; }
</style>
</head>
<body>

<header>
<img src="loguito.png" alt="Happy Shop Logo" />
<button class="menu-btn" onclick="toggleMenu()">‚ò∞</button>
<nav id="menu">
<a href="index.html">Inicio</a>
<a href="catalogo.html">Cat√°logo</a>
<a href="order.html">Happy Order</a>
<a href="puntos.html">Happy Puntos</a>
<a href="terminos.html">T√©rminos</a>
</nav>
</header>

<main>
<h1 class="page-title">Consulta tus Puntos Happy ü•≥</h1>
<section class="puntos-container">
<h2>Ingresa tu C√≥digo y PIN</h2>
<form class="consulta-form" id="consulta-form">
<input type="text" id="happy-code-input" placeholder="Tu HappyC√≥digo" required>
<input type="password" id="happy-pin-input" placeholder="Tu PIN (6 d√≠gitos)" required minlength="6" maxlength="6">
<button type="submit">Consultar</button>
</form>
<div id="resultados-container"></div>
</section>
</main>

<footer>
<div class="footer-content">
<div class="social-icons">
<a href="#"><i class="fab fa-instagram"></i></a>
<a href="#"><i class="fab fa-facebook-f"></i></a>
<a href="#"><i class="fab fa-whatsapp"></i></a>
</div>
<div class="footer-links">
<a href="terminos.html">T√©rminos y Condiciones</a>
<a href="mailto:soporte@happycorner.lol">Cont√°ctanos</a>
<a href="catalogo.html">Ver Todo el Cat√°logo</a>
</div>
</div>
</footer>

<script>
function toggleMenu(){document.getElementById('menu').classList.toggle('open');}

const API_URL = 'https://happy-corner.vercel.app/api/getPoints';

const form = document.getElementById('consulta-form');
const codeInput = document.getElementById('happy-code-input');
const pinInput = document.getElementById('happy-pin-input');
const resultadosContainer = document.getElementById('resultados-container');

form.addEventListener('submit', async e => {
    e.preventDefault();
    const customerCode = codeInput.value.trim();
    const customerPin = pinInput.value.trim();

    if(!customerCode || !customerPin){
        resultadosContainer.innerHTML = `<p class="error">Por favor, ingresa tu HappyC√≥digo y PIN.</p>`;
        return;
    }

    resultadosContainer.innerHTML = `<div class="loader"></div><p style="text-align:center;">Consultando...</p>`;

    try{
        const response = await fetch(API_URL, {
            method:'POST',
            headers:{ 'Content-Type':'application/json' },
            body: JSON.stringify({ customerCode, customerPin })
        });

        const data = await response.json();
        resultadosContainer.innerHTML = '';

        if(data.success){
            const customer = data.customer;
            resultadosContainer.innerHTML = `
            <div class="info-card">
            <h3>¬°Hola, ${customer.name}!</h3>
            <p><strong>HappyC√≥digo:</strong> ${customer.customer_code}</p>
            <p><strong>Puntos Happy:</strong> ${customer.total_points}</p>
            <p><strong>Correo:</strong> ${customer.email}</p>
            </div>`;
        }else{
            resultadosContainer.innerHTML = `<p class="error">${data.message}</p>`;
        }
    }catch(err){
        console.error(err);
        resultadosContainer.innerHTML = `<p class="error">Ocurri√≥ un error. Verifica tu conexi√≥n e int√©ntalo de nuevo.</p>`;
    }
});
</script>

</body>
</html>
