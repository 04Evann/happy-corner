<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Resumen de Compra | Happy Corner</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <style>
        .order-container { padding: 20px; max-width: 800px; margin: auto; min-height: 80vh; }
        
        /* Estilo de los items en el carrito */
        .cart-item {
            background: white;
            border-radius: 20px;
            padding: 15px;
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 12px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.03);
            border: 1px solid rgba(0,0,0,0.02);
        }
        .item-emoji {
            width: 50px; height: 50px; background: #f9f9f9;
            border-radius: 15px; display: flex; align-items: center;
            justify-content: center; font-size: 24px;
        }
        .item-details { flex-grow: 1; }
        .item-details h4 { font-size: 14px; font-weight: 700; margin: 0; }
        .item-details p { font-size: 12px; color: #888; margin: 0; }
        .item-price { font-weight: 800; color: #ff5299; font-size: 15px; }
        .remove-btn { 
            background: #ffeded; color: #ff5299; border: none; 
            width: 30px; height: 30px; border-radius: 50%; 
            cursor: pointer; font-weight: bold; font-size: 12px;
        }

        /* Card del Total */
        .total-section {
            background: var(--hp-gradient);
            border-radius: 25px;
            padding: 25px;
            color: white;
            text-align: center;
            margin-top: 30px;
            box-shadow: 0 10px 20px rgba(255, 82, 153, 0.2);
        }
        .total-section p { font-size: 14px; opacity: 0.9; margin-bottom: 5px; }
        .total-section h2 { font-size: 32px; font-weight: 800; margin-bottom: 20px; }

        /* Bot√≥n WhatsApp */
        .btn-whatsapp {
            background: white;
            color: #25D366;
            text-decoration: none;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 15px;
            border-radius: 15px;
            font-weight: 800;
            font-size: 16px;
            transition: 0.3s;
        }
        .btn-whatsapp:active { transform: scale(0.98); }

        .empty-msg {
            text-align: center;
            padding: 60px 20px;
            color: #888;
        }
    </style>
</head>
<body>

    <header>
        <img src="loguito.png" alt="HappyCorner" class="logo-img">
        <nav class="nav-desktop">
            <a href="index">Inicio</a>
            <a href="catalogo">Cat√°logo</a>
            <a href="happyorder">HappyOrder</a>
            <a href="loyalty">LoyaltyCorner</a>
        </nav>
        <div class="menu-btn" id="menuBtn">
            <span></span><span></span><span></span>
        </div>
    </header>

    <div class="overlay" id="overlay"></div>
    <nav class="side-menu" id="sideMenu">
        <a href="index">Inicio</a>
        <a href="catalogo">Cat√°logo</a>
        <a href="happyorder">HappyOrder</a>
        <a href="loyalty">LoyaltyCorner</a>
        <a href="terminos">T√©rminos</a>
    </nav>

    <div class="order-container">
        <h1 style="font-weight: 800; font-size: 24px; margin-bottom: 20px;">Tu Carrito üõí</h1>
        
        <div id="cart-items-container">
            </div>

        <div id="order-summary" style="display: none;">
            <div class="total-section">
                <p>Total de tu compra:</p>
                <h2 id="total-amount">$0</h2>
                <a href="#" class="btn-whatsapp" onclick="sendWhatsApp(event)">
                    PEDIR POR WHATSAPP ‚úÖ
                </a>
            </div>
            <p style="text-align: center; font-size: 11px; color: #aaa; margin-top: 15px; cursor: pointer;" onclick="clearCart()">
                Vaciar mi carrito
            </p>
        </div>

        <div id="cart-empty" class="empty-msg" style="display: none;">
            <div style="font-size: 50px;">ü•∫</div>
            <p>No tienes productos todav√≠a.</p>
            <a href="catalogo" class="add-btn" style="display: inline-block; width: auto; padding: 12px 30px; margin-top: 20px; text-decoration: none;">Ir al Cat√°logo</a>
        </div>
    </div>

    <script>
        // L√≥gica del Men√∫ lateral
        const menuBtn = document.getElementById('menuBtn');
        const sideMenu = document.getElementById('sideMenu');
        const overlay = document.getElementById('overlay');

        menuBtn.onclick = () => { sideMenu.classList.add('active'); overlay.classList.add('active'); };
        overlay.onclick = () => { sideMenu.classList.remove('active'); overlay.classList.remove('active'); };

        // L√≥gica del Carrito
        function loadCart() {
            const cart = JSON.parse(localStorage.getItem('hc_cart')) || [];
            const container = document.getElementById('cart-items-container');
            const summary = document.getElementById('order-summary');
            const emptyMsg = document.getElementById('cart-empty');
            
            if (cart.length === 0) {
                container.innerHTML = '';
                summary.style.display = 'none';
                emptyMsg.style.display = 'block';
                return;
            }

            emptyMsg.style.display = 'none';
            summary.style.display = 'block';
            container.innerHTML = '';
            
            let total = 0;

            cart.forEach((item, index) => {
                const subtotal = item.price * item.qty;
                total += subtotal;
                container.innerHTML += `
                    <div class="cart-item">
                        <div class="item-emoji">üéÅ</div>
                        <div class="item-details">
                            <h4>${item.name}</h4>
                            <p>${item.qty} unidad(es) x $${item.price.toLocaleString()}</p>
                        </div>
                        <div class="item-price">$${subtotal.toLocaleString()}</div>
                        <button class="remove-btn" onclick="removeItem(${index})">√ó</button>
                    </div>
                `;
            });

            document.getElementById('total-amount').innerText = `$${total.toLocaleString()}`;
        }

        function removeItem(index) {
            let cart = JSON.parse(localStorage.getItem('hc_cart')) || [];
            cart.splice(index, 1);
            localStorage.setItem('hc_cart', JSON.stringify(cart));
            loadCart();
        }

        function clearCart() {
            if(confirm('¬øSeguro quieres vaciar todo el carrito?')) {
                localStorage.removeItem('hc_cart');
                loadCart();
            }
        }

        function sendWhatsApp(e) {
            e.preventDefault();
            const cart = JSON.parse(localStorage.getItem('hc_cart')) || [];
            if(cart.length === 0) return;

            let message = "¬°Hola Happy Corner! üåà‚ú®\nQuiero realizar el siguiente pedido:\n\n";
            let total = 0;

            cart.forEach(item => {
                const subtotal = item.price * item.qty;
                message += `‚úÖ ${item.qty}x ${item.name} ($${subtotal.toLocaleString()})\n`;
                total += subtotal;
            });

            message += `\n*TOTAL A PAGAR: $${total.toLocaleString()}*`;
            message += `\n\nQuedo atento(a) para el pago. Gracias!`;

            const phone = "573000000000"; // PON TU N√öMERO AQU√ç
            window.open(`https://wa.me/${phone}?text=${encodeURIComponent(message)}`, '_blank');
        }

        window.onload = loadCart;
    </script>
</body>
</html>
